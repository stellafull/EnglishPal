
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.1.2, mkdocs-material-7.1.5" name="generator"/>
<title>Lab1 - EnglishPal</title>
<link href="../assets/stylesheets/main.bde7dde4.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.ef6f36e2.min.css" rel="stylesheet"/>
<meta content="#2094f3" name="theme-color"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
</head>
<body data-md-color-accent="" data-md-color-primary="blue" data-md-color-scheme="" dir="ltr">
<script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#englishpal-dependency-analysis-and-dependency-graph">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="EnglishPal" class="md-header__button md-logo" data-md-component="logo" href=".." title="EnglishPal">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            EnglishPal
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Lab1
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</label>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>
</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="EnglishPal" class="md-nav__button md-logo" data-md-component="logo" href=".." title="EnglishPal">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"></path></svg>
</a>
    EnglishPal
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Home
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          Lab1
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        Lab1
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
    Introduction
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#materials-and-methods">
    Materials and Methods
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#results">
    Results
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#discussions">
    Discussions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
    References
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../lab2/">
        Lab2
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduction">
    Introduction
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#materials-and-methods">
    Materials and Methods
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#results">
    Results
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#discussions">
    Discussions
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#references">
    References
  </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="englishpal-dependency-analysis-and-dependency-graph">EnglishPal Dependency Analysis and Dependency Graph</h1>
<p>Author: 占健豪, 王彦超, 陈致远, 汤佳伟</p>
<p>Date: 2021/5/17</p>
<p>Location: 22-206</p>
<div style="page-break-after: always;"></div>
<h2 id="introduction">Introduction</h2>
<p>EnglishPal is a website application dedicated to helping people improve their English. This lab study help us understand the current health level of the architecture of EnglishPal.</p>
<h2 id="materials-and-methods">Materials and Methods</h2>
<p>The module-level dependencies are captured by snakefood, and the class/function-level dependency graph for EnglilshPal is hand-drawn and can be plotted by Mermaid.</p>
<h2 id="results">Results</h2>
<ol>
<li>EnglishPalModule.dot:</li>
</ol>
<pre><code>   strict digraph "dependencies" {
       graph [
              rankdir="LR",
              overlap="scale",
              size="8,10",
              ratio="fill",
              fontsize="16",
              fontname="Helvetica",
              clusterrank="local"
           ]
          node [
              fontsize=10
              shape=ellipse
              // style=filled
              // shape=box
          ];

   "UseSqlite.py"  [style=filled];
   "WordFreq.py"  [style=filled];
   "WordFreq.py" -&gt; "wordfreqCMD.py";
   "difficulty.py"  [style=filled];
   "difficulty.py" -&gt; "wordfreqCMD.py";
   "main.py"  [style=filled];
   "main.py" -&gt; "UseSqlite.py";
   "main.py" -&gt; "WordFreq.py";
   "main.py" -&gt; "difficulty.py";
   "main.py" -&gt; "pickle_idea.py";
   "main.py" -&gt; "pickle_idea2.py";
   "main.py" -&gt; "wordfreqCMD.py";
   "pickle_idea.py"  [style=filled];
   "pickle_idea2.py"  [style=filled];
   "wordfreqCMD.py"  [style=filled];
   "wordfreqCMD.py" -&gt; "pickle_idea.py";
   }
</code></pre>
<p><img alt="graphviz" src="../img/graphviz.png"/>
2. class/function-level.txt</p>
<pre><code class="language-mermaid.txt">   graph LR

   load_freq_history --&gt;pickle_idea.load_record
   verify_user --&gt; Sqlite3Template.RecordQuery
   add_user --&gt;Sqlite3Template.InsertQuery
   check_username_availability --&gt; Sqlite3Template.RecordQuery
   get_expiry_date --&gt;Sqlite3Template.RecordQuery
   get_today_article --&gt; Sqlite3Template.RecordQuery
   get_today_article --&gt; load_freq_history
   get_today_article --&gt; difficulty.get_difficulty_level
   get_today_article --&gt; user_difficulty_level
   get_today_article --&gt;random.shuffle
   get_today_article --&gt;random.choice
   get_today_article --&gt; text_difficulty_level
   get_today_article --&gt; within_range
   get_today_article --&gt; get_answer_part
   mark_word --&gt; load_freq_history
   mark_word --&gt; pickle_idea.dict2lst
   mark_word --&gt; pickle_idea.merge_frequency
   mark_word --&gt; pickle_idea.save_frequency_to_pickle
   mainpage --&gt; WordFreq
   mainpage --&gt; load_freq_history
   mainpage --&gt; pickle_idea.dict2lst
   mainpage --&gt; pickle_idea.merge_frequency
   mainpage --&gt; pickle_idea.save_frequency_to_pickle
   mainpage --&gt; pickle_idea.dict2lst
   user_mark_word --&gt; load_freq_history
   user_mark_word --&gt;pickle_idea2.dict2lst
   user_mark_word --&gt;pickle_idea2.merge_frequency
   user_mark_word --&gt;pickle_idea2.save_frequency_to_pickle
   userpage --&gt; WordFreq
   userpage --&gt; pickle_idea.load_record
   userpage --&gt; load_freq_history
   userpage --&gt; sort_in_descending_order
   signup --&gt; check_username_availability
   signup --&gt; render_template
   signup --&gt; add_user
   signup --&gt; verify_user
   login --&gt; render_template
   login --&gt; verify_user

   difficulty.load_record --&gt; pickle.load
   difficulty.difficulty_level_from_frequency --&gt; math.log
   difficulty.get_difficulty_level --&gt; revert_dict
   difficulty.get_difficulty_level --&gt; sort_in_ascending_order
   difficulty.text_difficulty_level --&gt;sort_in_descending_order

   pickle_idea.merge_frequency --&gt; pickle_idea.lst2dict

   pickle_idea2.merge_frequency --&gt; pickle_idea2.lst2dict

   Sqlite3Template.do --&gt; Sqlite3Template.connect
   Sqlite3Template.do --&gt; Sqlite3Template.instructions
   Sqlite3Template.do --&gt; Sqlite3Template.operate

   WordFreq.get_freq --&gt; wordfreqCMD.sort_in_descending_order
</code></pre>
<div class="mermaid">   graph LR

   load_freq_history --&gt;pickle_idea.load_record
   verify_user --&gt; Sqlite3Template.RecordQuery
   add_user --&gt;Sqlite3Template.InsertQuery
   check_username_availability --&gt; Sqlite3Template.RecordQuery
   get_expiry_date --&gt;Sqlite3Template.RecordQuery
   get_today_article --&gt; Sqlite3Template.RecordQuery
   get_today_article --&gt; load_freq_history
   get_today_article --&gt; difficulty.get_difficulty_level
   get_today_article --&gt; user_difficulty_level
   get_today_article --&gt;random.shuffle
   get_today_article --&gt;random.choice
   get_today_article --&gt; text_difficulty_level
   get_today_article --&gt; within_range
   get_today_article --&gt; get_answer_part
   mark_word --&gt; load_freq_history
   mark_word --&gt; pickle_idea.dict2lst
   mark_word --&gt; pickle_idea.merge_frequency
   mark_word --&gt; pickle_idea.save_frequency_to_pickle
   mainpage --&gt; WordFreq
   mainpage --&gt; load_freq_history
   mainpage --&gt; pickle_idea.dict2lst
   mainpage --&gt; pickle_idea.merge_frequency
   mainpage --&gt; pickle_idea.save_frequency_to_pickle
   mainpage --&gt; pickle_idea.dict2lst
   user_mark_word --&gt; load_freq_history
   user_mark_word --&gt;pickle_idea2.dict2lst
   user_mark_word --&gt;pickle_idea2.merge_frequency
   user_mark_word --&gt;pickle_idea2.save_frequency_to_pickle
   userpage --&gt; WordFreq
   userpage --&gt; pickle_idea.load_record
   userpage --&gt; load_freq_history
   userpage --&gt; sort_in_descending_order
   signup --&gt; check_username_availability
   signup --&gt; render_template
   signup --&gt; add_user
   signup --&gt; verify_user
   login --&gt; render_template
   login --&gt; verify_user

   difficulty.load_record --&gt; pickle.load
   difficulty.difficulty_level_from_frequency --&gt; math.log
   difficulty.get_difficulty_level --&gt; revert_dict
   difficulty.get_difficulty_level --&gt; sort_in_ascending_order
   difficulty.text_difficulty_level --&gt;sort_in_descending_order

   pickle_idea.merge_frequency --&gt; pickle_idea.lst2dict

   pickle_idea2.merge_frequency --&gt; pickle_idea2.lst2dict

   Sqlite3Template.do --&gt; Sqlite3Template.connect
   Sqlite3Template.do --&gt; Sqlite3Template.instructions
   Sqlite3Template.do --&gt; Sqlite3Template.operate

   WordFreq.get_freq --&gt; wordfreqCMD.sort_in_descending_order
</div>
<p><img alt="" src=""/>
3. Pros and cons of the current architecture of EnglishPal:</p>
<p>Shortcoming:</p>
<ol>
<li>The addition of the web pages makes the system inefficient to deliver media elements.</li>
<li>All the processing tasks are done by the server before the delivery of the content to the client. The server inefficient to handle multiple user requests.</li>
<li>Any development change or maintenance costs a lot.</li>
</ol>
<p>Advantages:</p>
<ol>
<li>Efficient with full-stack, no communication costs between front-end and back-end.</li>
<li>Effective for simple and small projects, with simple CRUD and smaller codebase, it's more enough.</li>
<li>Higher security, protecting the API from attack.</li>
<li>Similar concept and syntax, it helps focusing on project features.</li>
<li>It reduces the mistakes in communications.</li>
</ol>
<h2 id="discussions">Discussions</h2>
<p>Through this lab we tried to understand the current health level of the architecture of EnglishPal. During the lab, we learnt to use Snakefood, Graphviz Online, Mermaid as well as Read the Docs. Most importantly, we mastered a basic work flow of analysing the structure and the dependency of an existing project which will sure to contribute to the future work.</p>
<h2 id="references">References</h2>
<p>Graphviz. https://graphviz.org/</p>
<p>Graphviz Online. https://bit.ly/3uYDiLV</p>
<p>Read the Docs. https://readthedocs.org/</p>
<p>Snakefood: Python Dependency Graphs. http://furius.ca/snakefood/</p>
<p>Mermaid. https://mermaid-js.github.io/mermaid/#/</p>
<p>Jacopo Malnati. X-Ray 1.0.4.1, my Bachelor and Research Project. https://xray.inf.usi.ch/xray.php</p>
<p>Sofia Peterson. A Brief Guide How to Write a Computer Science Lab Report. https://thehackpost.com/a-brief-guide-how-to-write-a-computer-science-lab-report.html</p>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a class="md-footer__link md-footer__link--prev" href=".." rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              Home
            </div>
</div>
</a>
<a class="md-footer__link md-footer__link--next" href="../lab2/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              Lab2
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../assets/javascripts/workers/search.d351de03.min.js", "version": null}</script>
<script src="../assets/javascripts/bundle.a1609d9a.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({});</script></body>
</html>